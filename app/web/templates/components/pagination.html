{% if total_pages > 1 %}
<nav class="pagination-wrapper" aria-label="Page navigation">
    <ul class="pagination">
        <!-- Previous page -->
        <li class="page-item {% if current_page == 1 %}disabled{% endif %}">
            <a class="page-link" href="{{ url_for(request.endpoint, page=current_page-1, **request.args) }}" aria-label="Previous">
                <i class="fas fa-chevron-left"></i>
            </a>
        </li>

        <!-- First page -->
        {% if current_page > 3 %}
        <li class="page-item">
            <a class="page-link" href="{{ url_for(request.endpoint, page=1, **request.args) }}">1</a>
        </li>
        {% if current_page > 4 %}
        <li class="page-item disabled">
            <span class="page-link">...</span>
        </li>
        {% endif %}
        {% endif %}

        <!-- Page numbers -->
        {% for page in range(max(1, current_page-2), min(total_pages+1, current_page+3)) %}
        <li class="page-item {% if page == current_page %}active{% endif %}">
            <a class="page-link" href="{{ url_for(request.endpoint, page=page, **request.args) }}">{{ page }}</a>
        </li>
        {% endfor %}

        <!-- Last page -->
        {% if current_page < total_pages-2 %}
        {% if current_page < total_pages-3 %}
        <li class="page-item disabled">
            <span class="page-link">...</span>
        </li>
        {% endif %}
        <li class="page-item">
            <a class="page-link" href="{{ url_for(request.endpoint, page=total_pages, **request.args) }}">{{ total_pages }}</a>
        </li>
        {% endif %}

        <!-- Next page -->
        <li class="page-item {% if current_page == total_pages %}disabled{% endif %}">
            <a class="page-link" href="{{ url_for(request.endpoint, page=current_page+1, **request.args) }}" aria-label="Next">
                <i class="fas fa-chevron-right"></i>
            </a>
        </li>
    </ul>
</nav>
{% endif %} 